<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta charset="UTF-8" />
<title>Loading...</title>
<script src="http://s0.qhimg.com/lib/jquery/183.js"></script>
<script src="src/resLoader.js"></script>
<style>
.progress{
	width: 600px;
	height: 20px;
	border:3px solid red;
	position: absolute;
	left: 0;top: 0;right: 0;bottom: 0;
	margin:auto;
}
.progressbar{
	position: absolute;
	left: 0;
	top: 0;
	width: 0;
	height: 100%;
	background-color: green;
	-webkit-transition:width ease-in 200ms;
}
.progresstext{
	position: absolute;
	top: 30px;
	right: 0;
}
</style>
</head>
<body>
<div class="progress">
	<div class="progressbar"></div>
	<div class="progresstext">
		<span class="current"></span>/
		<span class="total"></span>
	</div>
</div>



<script>
var loader = new resLoader({
	resources : [
		'http://illyasviel.cc/assets/image/back_class_normal.png',
		'http://illyasviel.cc/assets/live2d/illya_basesuit/moc/ylia.moc',
		'http://illyasviel.cc/assets/live2d/illya_basesuit/moc/ylia.2048/texture_00.png',
		'http://illyasviel.cc/assets/live2d/illya/moc/ylia02.moc',
		'http://illyasviel.cc/assets/live2d/illya/moc/ylia02.2048/texture_00.png'
	],
	onStart : function(total){
		console.log('start:'+total);
	},
	onProgress : function(current, total){
		console.log(current+'/'+total);
		var percent = current/total*100;
		$('.progressbar').css('width', percent+'%');
		$('.progresstext .current').text(current);
		$('.progresstext .total').text(total);
	},
	onComplete : function(total){
		window.location.href = "http://illyasviel.cc/live2d.html";;
	}
});

loader.start();
</script>
</body>
</html>